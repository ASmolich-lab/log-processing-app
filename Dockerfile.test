FROM python:3.12-slim

WORKDIR /app

# Copy only the Docker CLI binary from the official image
COPY --from=docker:cli /usr/local/bin/docker /usr/local/bin/

# Install Python dependencies
RUN pip install --no-cache-dir pytest docker

# Copy the project
COPY . .

# Keep the container alive
CMD ["tail", "-f", "/dev/null"]